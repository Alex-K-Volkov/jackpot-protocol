<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jackpot Protocol - Final Stand</title>
    <style>
        /* --- EMBEDDED CSS --- */
        @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap');
        :root{--primary-color:#00AEEF;--accent-color:#FFD700;--background-color:#000d1a;--text-color:#f0f0f0;--container-bg:rgba(10, 25, 47, 0.7);--border-color:rgba(0, 174, 239, 0.3);}
        body{margin:0;font-family:'Roboto Mono',monospace;background-color:var(--background-color);color:var(--text-color);display:flex;justify-content:center;align-items:center;min-height:100vh;overflow-y:auto;text-align:center;padding:2rem 1rem;box-sizing:border-box;}
        .container{background:var(--container-bg);border:1px solid var(--border-color);border-radius:20px;padding:2.5rem 3.5rem;max-width:750px;width:100%;box-shadow:0 0 40px rgba(0, 174, 239, 0.2);backdrop-filter:blur(12px);animation:fadeIn 1.5s ease-out;}
        header h1{color:#fff;font-size:2.8rem;margin:0;letter-spacing:3px;text-shadow:0 0 10px #fff;}
        header p{font-size:0.9rem;letter-spacing:2.5px;opacity:0.8;color:var(--primary-color);margin-bottom:2.5rem;text-transform:uppercase;}
        main{margin:2rem 0;}
        .status-box{background-color:rgba(255, 255, 255, 0.1);padding:0.75rem;border-radius:8px;margin-bottom:2rem;font-size:0.9rem;border:1px solid var(--border-color);word-wrap:break-word;}
        .jackpot-container p{font-size:1rem;opacity:0.8;margin-bottom:0.5rem;}
        #jackpot-amount{font-size:4.5rem;font-weight:700;color:var(--accent-color);margin:0 0 2.5rem 0;text-shadow:0 0 25px var(--accent-color);}
        footer{display:flex;justify-content:space-around;margin-top:3rem;padding-top:1.5rem;border-top:1px solid var(--border-color);}
        .info-box{flex-basis:30%;}
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1 id="main-title">JACKPOT PROTOCOL</h1>
            <p>THE GLOBAL ON-CHAIN LOTTERY</p>
        </header>
        <main>
            <div class="jackpot-container">
                <p>WIN UP TO</p>
                <h2 id="jackpot-amount">$1,000,000</h2>
            </div>
            <div id="status-display" class="status-box">Initializing DApp...</div>
            <!-- The official Web3Modal button will be injected here by the script -->
            <div id="connect-button-container"></div>
        </main>
        <footer>
            <div class="info-box"><p>TICKET PRICE</p><h3>$1 USDC</h3></div>
            <div class="info-box"><p>TICKETS SOLD</p><h3 id="tickets-sold">0</h3></div>
            <div class="info-box"><p>FAIRNESS</p><h3>ON-CHAIN (VRF)</h3></div>
        </footer>
    </div>

    <!-- This is a SIMULATED library for demonstration. -->
    <!-- A real implementation would require embedding the full library code -->
    <script>
        // --- SIMULATED LIBRARIES ---
        var ethers = {
            providers: { Web3Provider: function(p) { this.provider = p; return this; } },
            Contract: function() { return {}; }
        };
        var Web3Modal = {
            createWeb3Modal: function(config) {
                console.log("SIMULATED: Web3Modal created with Project ID:", config.projectId);
                return {
                    open: function() {
                        const statusDisplay = document.getElementById('status-display');
                        statusDisplay.innerText = "SIMULATED: QR Code Modal would open here.";
                        statusDisplay.style.color = "var(--accent-color)";
                        console.log("SIMULATED: Modal open requested.");
                    }
                };
            }
        };
    </script>
    
    <!-- --- FINAL APPLICATION SCRIPT --- -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const statusDisplay = document.getElementById('status-display');
            const connectContainer = document.getElementById('connect-button-container');

            if (!statusDisplay || !connectContainer) {
                console.error("Critical UI element not found!");
                return;
            }

            try {
                // --- Configuration ---
                const projectId = '2d71170b7513eff1a5a8144b20cf2e4a'; // Example Project ID
                
                const { createWeb3Modal, defaultConfig } = Web3Modal;

                const metadata = {
                    name: 'Jackpot Protocol',
                    description: 'A sample DApp',
                    url: 'https://jackpot-protocol.netlify.app',
                    icons: []
                };

                // Create the modal object
                const modal = createWeb3Modal({
                    ethersConfig: defaultConfig({ metadata }),
                    chains: [{
                        chainId: 84532,
                        name: 'Base Sepolia',
                        currency: 'ETH',
                        explorerUrl: 'https://sepolia.basescan.org',
                        rpcUrl: 'https://sepolia.base.org'
                    }],
                    projectId,
                    enableExplorer: true,
                    // **COMMAND REQUIREMENT**: Force QR Code only
                    mobileWallets: [],
                    desktopWallets: [],
                    walletImages: {}
                });

                statusDisplay.innerText = "DApp Initialized. Please connect your wallet.";
                
                // Inject the official Web3Modal button
                const newButton = document.createElement('w3m-button');
                connectContainer.appendChild(newButton);

            } catch(e) {
                console.error("Fatal error during initialization:", e);
                statusDisplay.innerText = "A critical error occurred during initialization.";
                statusDisplay.style.color = "red";
            }
        });
    </script>
</body>
</html>
